import{a as E}from"../../chunk-34A766AI.mjs";import"../../chunk-OJVCB4YM.mjs";import"../../chunk-WIPTQCGG.mjs";import{DollarSign as B}from"lucide-react";import{useCallback as c,useEffect as R,useState as D}from"react";import{twMerge as A}from"tailwind-merge";import{jsx as w}from"react/jsx-runtime";var H=n=>{let o=Number.parseFloat(n);return isNaN(o)&&(o=0),Math.round(o*100)},M=n=>n!=null?(n/100).toFixed(2):void 0,K=n=>{let{id:o,name:V,value:r,placeholder:f,preSlot:g,postSlot:k,onChange:i,onBlur:d,onFocus:C,disabled:P,step:s=.1}=n,[h,m]=D(r),[u,b]=D(M(r));R(()=>{r!==h&&(m(r),b(M(r)))},[r,h]);let a=c(e=>{if(i)if(!e||e.trim()==="")m(null),i(null);else{let t=H(e);m(t),i(t)}b(e)},[i]),S=c(e=>{let t=e.target.value;if(t===""){a("");return}let l=t.replace(/[^0-9,.]/g,""),v=l.replace(/[,.](?!$)/g,"").replace(/,$/,"."),p=l.match(/([.,])([0-9]+)$/);if(p){let N=p[2],x=l.slice(0,-p[0].length).replace(/[,.]/g,""),$=N.slice(0,2),y=Number.parseFloat(`${x}.${$}`);if(!Number.isNaN(y)){let L=Math.min(2,N.length),F=y.toFixed(L);v=x.length>0?F:F.replace(/^0(?=\.)/,"")}}a(v)},[a]),I=c(e=>{if(u){let t=u;t.startsWith(".")&&(t=`0${t}`),t.endsWith(".")&&(t=t.replace(/\.$/,"")),t!==u&&a(t)}d&&d(e)},[d,u,a]),T=c(e=>{if(!/[0-9.,]/.test(e.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key)&&!e.ctrlKey&&!e.metaKey&&e.preventDefault(),e.key==="ArrowUp"){e.preventDefault();let t=Number.parseFloat(e.currentTarget.value),l=(Number.isNaN(t)?s:t+s).toFixed(2);a(l)}if(e.key==="ArrowDown"){let t=Number.parseFloat(e.currentTarget.value),l=Math.max(0,Number.isNaN(t)?-s:t-s).toFixed(2);a(l)}(e.key==="."||e.key===",")&&e.currentTarget.value.includes(".")&&e.preventDefault()},[s,a]);return w(E,{type:"text",inputMode:"decimal",id:o,name:V,className:A("dark:placeholder:text-polar-500 block w-full px-4 pl-8 text-base font-normal placeholder:text-gray-400",n.className??""),value:u,onChange:S,onKeyDown:T,placeholder:f?`${(f/100).toLocaleString("en-US")}`:void 0,preSlot:g||w(B,{className:"h-4 w-4"}),postSlot:k,onBlur:I,onFocus:C,disabled:P})},O=K;export{O as default};
