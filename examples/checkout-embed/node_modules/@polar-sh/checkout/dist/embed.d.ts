/**
 * Message sent to the parent window when the embedded checkout is fully loaded.
 */
interface EmbedCheckoutMessageLoaded {
    event: 'loaded';
}
/**
 * Message sent to the parent window when the embedded checkout needs to be closed.
 */
interface EmbedCheckoutMessageClose {
    event: 'close';
}
/**
 * Message sent to the parent window when the checkout is confirmed.
 *
 * At that point, the parent window shouldn't allow to close the checkout.
 */
interface EmbedCheckoutMessageConfirmed {
    event: 'confirmed';
}
/**
 * Message sent to the parent window when the checkout is successfully completed.
 *
 * If `redirect` is set to `true`, the parent window should redirect to the `successURL`.
 */
interface EmbedCheckoutMessageSuccess {
    event: 'success';
    successURL: string;
    redirect: boolean;
}
/**
 * Represents an embedded checkout message.
 */
type EmbedCheckoutMessage = EmbedCheckoutMessageLoaded | EmbedCheckoutMessageClose | EmbedCheckoutMessageConfirmed | EmbedCheckoutMessageSuccess;
/**
 * Represents an embedded checkout instance.
 */
declare class EmbedCheckout {
    private iframe;
    private loader;
    private loaded;
    private closable;
    private eventTarget;
    constructor(iframe: HTMLIFrameElement, loader: HTMLDivElement);
    /**
     * Send an embed checkout event to the parent window.
     * @param message
     * @param targetOrigin
     */
    static postMessage(message: EmbedCheckoutMessage, targetOrigin: string): void;
    /**
     * Create a new embedded checkout instance by injecting an iframe into the DOM.
     *
     * @param url A Checkout Link.
     * @param theme The theme of the embedded checkout. Defaults to `light`.
  
     * @returns A promise that resolves to an instance of EmbedCheckout.
     * The promise resolves when the embedded checkout is fully loaded.
     */
    static create(url: string, theme?: 'light' | 'dark'): Promise<EmbedCheckout>;
    /**
     * Initialize embedded checkout triggers.
     *
     * This method will add a click event listener to all elements with the `data-polar-checkout` attribute.
     * The Checkout Link is either the `href` attribute for a link element or the value of `data-polar-checkout` attribute.
     *
     * The theme can be optionally set using the `data-polar-checkout-theme` attribute.
     *
     * @example
     * ```html
     * <a href="https://buy.polar.sh/polar_cl_123" data-polar-checkout data-polar-checkout-theme="dark">Checkout</a>
     * ```
     */
    static init(): void;
    /**
     * Close the embedded checkout.
     */
    close(): void;
    /**
     * Add an event listener to the embedded checkout events.
     *
     * @param type
     * @param listener
     */
    addEventListener(type: 'loaded', listener: (event: CustomEvent<EmbedCheckoutMessageLoaded>) => void, options?: AddEventListenerOptions | boolean): void;
    addEventListener(type: 'close', listener: (event: CustomEvent<EmbedCheckoutMessageClose>) => void, options?: AddEventListenerOptions | boolean): void;
    addEventListener(type: 'confirmed', listener: (event: CustomEvent<EmbedCheckoutMessageConfirmed>) => void, options?: AddEventListenerOptions | boolean): void;
    addEventListener(type: 'success', listener: (event: CustomEvent<EmbedCheckoutMessageSuccess>) => void, options?: AddEventListenerOptions | boolean): void;
    /**
     * Remove an event listener from the embedded checkout events.
     *
     * @param type
     * @param listener
     */
    removeEventListener(type: 'loaded', listener: (event: CustomEvent<EmbedCheckoutMessageLoaded>) => void): void;
    removeEventListener(type: 'close', listener: (event: CustomEvent<EmbedCheckoutMessageClose>) => void): void;
    removeEventListener(type: 'confirmed', listener: (event: CustomEvent<EmbedCheckoutMessageConfirmed>) => void): void;
    removeEventListener(type: 'success', listener: (event: CustomEvent<EmbedCheckoutMessageSuccess>) => void): void;
    private static checkoutElementClickHandler;
    /**
     * Default listener for the `loaded` event.
     *
     * This listener will remove the loader spinner when the embedded checkout is fully loaded.
     */
    private loadedListener;
    /**
     * Default listener for the `close` event.
     *
     * This listener will call the `close` method to remove the embedded checkout from the DOM.
     */
    private closeListener;
    /**
     * Default listener for the `confirmed` event.
     *
     * This listener will set a flag to prevent the parent window from closing the embedded checkout.
     */
    private confirmedListener;
    /**
     * Default listener for the `success` event.
     *
     * This listener will redirect the parent window to the `successURL` if `redirect` is set to `true`.
     */
    private successListener;
    /**
     * Initialize the window message listener to receive messages from the embedded checkout
     * and re-dispatch them as events for the embedded checkout instance.
     */
    private initWindowListener;
}
declare global {
    interface Window {
        Polar: {
            EmbedCheckout: typeof EmbedCheckout;
        };
    }
}

export { EmbedCheckout as PolarEmbedCheckout };
